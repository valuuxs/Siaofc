/*import {webp2png} from '../lib/webp2mp4.js';
const handler = async (m, {conn, usedPrefix, command}) => {
  const notStickerMessage = `*[â—ğˆğğ…ğâ—] ğšğ™´ğš‚ğ™¿ğ™¾ğ™½ğ™³ğ™° ğ™°ğ™» ğš‚ğšƒğ™¸ğ™²ğ™ºğ™´ğš ğš€ğš„ğ™´ ğ™³ğ™´ğš‚ğ™´ğ™´ ğ™²ğ™¾ğ™½ğš…ğ™´ğšğšƒğ™¸ğš ğ™´ğ™½ ğ™¸ğ™¼ğ™°ğ™¶ğ™´ğ™½ ğ™²ğ™¾ğ™½ ğ™´ğ™» ğ™²ğ™¾ğ™¼ğ™°ğ™½ğ™³ğ™¾ ${usedPrefix + command}*`;
  if (!m.quoted) throw notStickerMessage;
  const q = m.quoted || m;
  const mime = q.mediaType || '';
  if (!/sticker/.test(mime)) throw notStickerMessage;
  const media = await q.download();
  const out = await webp2png(media).catch((_) => null) || Buffer.alloc(0);
  await conn.sendFile(m.chat, out, 'error.png', null, m);
};
handler.help = ['toimg (reply)'];
handler.tags = ['sticker'];
handler.command = ['toimg', 'jpg', 'img'];
export default handler;*/

import { webp2png } from '../lib/webp2mp4.js';

const handler = async (m, { conn, usedPrefix, command }) => {
  try {
    if (!m.quoted) throw `*[ â„¹ï¸ ] Responda a un sticker con el comando ${usedPrefix + command} para convertirlo en imagen.*`;

    const q = m.quoted;
    const mime = q.mimetype || '';

    if (!mime.includes('webp')) throw '*[â—ğˆğğ…ğâ—] El archivo adjunto no es un sticker.*';

    const media = await q.download();
    if (!media) throw '*[â—ğ„ğ‘ğ‘ğğ‘â—] No se pudo descargar el sticker.*';

    const out = await webp2png(media).catch(() => null);
    if (!out || out.length === 0) throw '*[â—ğ„ğ‘ğ‘ğğ‘â—] No se pudo convertir el sticker en imagen.*';

    await conn.sendFile(m.chat, out, 'sticker.png', '*AquÃ­ tienes tu imagen!*', m);
  } catch (error) {
    m.reply(error);
  }
};

handler.help = ['toimg (reply)'];
handler.tags = ['sticker'];
handler.command = ['toimg', 'jpg', 'img'];

export default handler;